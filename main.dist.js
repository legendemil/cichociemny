"use strict";var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,n,o,i,r=e.childNodes,a=r.length,s=[],l=0;a>l;l++)t=r[l],1===t.nodeType&&(n=t.children[0],o=n.getAttribute("data-size").split("x"),i={src:n.getAttribute("href"),w:parseInt(o[0],10),h:parseInt(o[1],10)},t.children.length>1&&(i.title=t.children[1].innerHTML),n.children.length>0&&(i.msrc=n.children[0].getAttribute("src")),i.el=t,s.push(i));return s},n=function(e,t){for(var n,o=!0;o;){var i=e,r=t;if(o=!1,!(n=i))return n;if(r(i))return i;e=i.parentNode,t=r,o=!0}},o=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,o=n(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(o){for(var i,a=o.parentNode,s=o.parentNode.childNodes,l=s.length,u=0,c=0;l>c;c++)if(1===s[c].nodeType){if(s[c]===o){i=u;break}u++}return i>=0&&r(i,a),!1}},i=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),o=0;o<n.length;o++)if(n[o]){var i=n[o].split("=");i.length<2||(t[i[0]]=i[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},r=function(e,n,o,i){var r,a,s,l=document.querySelectorAll(".pswp")[0];if(s=t(n),a={galleryUID:n.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=s[e].el.getElementsByTagName("img")[0],n=window.pageYOffset||document.documentElement.scrollTop,o=t.getBoundingClientRect();return{x:o.left,y:o.top+n,w:o.width}}},i)if(a.galleryPIDs){for(var u=0;u<s.length;u++)if(s[u].pid==e){a.index=u;break}}else a.index=parseInt(e,10)-1;else a.index=parseInt(e,10);isNaN(a.index)||(o&&(a.showAnimationDuration=0),r=new PhotoSwipe(l,PhotoSwipeUI_Default,s,a),r.init())},a=document.querySelectorAll(e),s=0,l=a.length;l>s;s++)a[s].setAttribute("data-pswp-uid",s+1),a[s].onclick=o;var u=i();u.pid&&u.gid&&r(u.pid,a[u.gid-1],!0,!0)};
"use strict";var App=function(e){function t(){window.scrollTo(0,0),$(".page-intro").addClass("page-intro--hide"),setTimeout(function(){return $(".page-intro").remove()},1e3)}function n(){$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top},1e3),!1}})}function o(e){var t=e.target.getAttribute("data-fileName"),n=e.target.getAttribute("data-headerText");u.$loadingScreen.addClass("is-showed"),Router.changeHash("#"+n),$.get(t,function(e){NewPage.render(n,e),u.$loadingScreen.removeClass("is-showed")})}function i(){var e=$(this).scrollTop(),t=u.$pageHeader,n=u.$infoBox,o=u.$timelineBox,i=(u.$bioInfoArr,u.$orders),r=u.$galleryImgArr,a=window.innerWidth<560?!0:!1;if(f||(f=n.offset().top),e>f-c/1.5&&d>e&&n.addClass("slide-out"),d>e){var s=0,l=0,v=0;a||(s=e/15,l=e/1.1,v=e/2.5,s=Math.max(10,s)),t.find(".page-header__hero").css({transform:"translate(-50%, "+s+"%)"}),t.find(".logo").css({transform:"translateY("+l+"%)"}),t.find(".page-header__info-box").css({transform:"translateY("+v+"%)"})}e>d-c&&g>e&&!function(){var t=1,n=1;a||(t=(e+c/2)/d/1.5,t=Math.min(t,1)),$.each(o,function(t,o){a||(n=(e+c/2.4)/$(o).offset().top,n=Math.min(n,1)),$(o).css({transform:"scale("+n+")"})})}(),!a&&e>h-c/1.2&&g>e&&($.each(i,function(e,t){setTimeout(function(){return $(t).addClass("is-showed")},250*e)}),u.$orders=null),!a&&e>g-c/1.2&&m>e&&($.each(r,function(e,t){setTimeout(function(){return $(t).addClass("is-showed")},250*e)}),u.$galleryImgArr=null),!a&&e>p&&g>e&&$.each($(".interview-box"),function(t,n){e+c/1.5>$(n).offset().top&&$(n).addClass("is-showed")})}function r(){$(".page-nav-list").toggleClass("is-active")}function a(){u={$pageHeader:$(".page-header"),$infoBox:$(".info-box"),$timelineBox:$(".timeline-box"),$galleryImgArr:$(".my-gallery__figure img"),$navCloseBtn:$(".page-nav__close-btn"),$loadingScreen:$(".loading-screen"),$orders:$(".order-item")}}function s(){$(".new-page-btn").on("click",o),$(window).on("scroll",i),n(),u.$navCloseBtn.on("click",r)}function l(){a(),s(),t()}var u={$pageHeader:null,$infoBox:null,$timelineBox:null,$galleryImgArr:null,$navCloseBtn:null,$loadingScreen:null,$orders:null},c=window.innerHeight,f=0,d=$(".timeline").offset().top,p=$(".interview").offset().top,g=($("#bio").offset().top,$(".gallery").offset().top),h=$(".orders").offset().top,m=$(".about").offset().top;return e.init=l,e}(App||{}),VisitsCounter=function(e){var t=$("#page-visits");return e.update=function(){$.get("php/counter.php",function(e){t.text(e)})},e}(VisitsCounter||{}),Post=function(e){function t(e,t,n){return'<li class="post">\n					<p class="post__author"><b>'+e+'</b> pisze: <span class="post__date">'+n+'</span></p>\n					<p class="post__text">'+t+"</p>\n				</li>"}return e.renderPost=t,e}(Post||{}),QuestBook=function(e,t){function n(e){e.preventDefault(),i(),r()}function o(e,t,n){$.post("php/questBook.php?type=sendPost",{name:e,text:t,date:n},function(e,t){console.log(e,t)})}function i(){var e=c.$name.val(),n=c.$email.val(),i=c.$text.val(),r=new Date,a=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();o(e,i,n),c.$list.prepend(t.renderPost(e,i,a))}function r(){c.$name.val(""),c.$email.val(""),c.$text.val("")}function a(){$.get("php/questBook.php?type=getPosts",function(e){e.forEach(function(e){e=JSON.parse(e),c.$list.prepend(t.renderPost(e.name,e.text,e.date))})},"json")}function s(){c.$form=$(".quest-book__form"),c.$name=$(c.$form).find(".quest-book__form-name"),c.$email=$(c.$form).find(".quest-book__form-email"),c.$text=$(c.$form).find(".quest-book__form-text"),c.$list=$(".posts")}function l(){$(c.$form).on("submit",n)}function u(){s(),l(),a()}var c={};return e.init=u,e}(QuestBook||{},Post),NewPage=function(e){function t(e,t){window.localStorage.setItem("is-page-loaded",!0),a.heading.innerText=e,a.content.innerHTML=t,document.body.appendChild(a.box)}function n(){var e=$(".view-more");e.addClass("view-more__hide"),setTimeout(function(){return e.removeClass("view-more__hide").remove()},500)}function o(){var e=a.viewDetailsTmpl=document.querySelector("#view-details").content;a.heading=e.querySelector(".view-more__heading span"),a.content=e.querySelector(".view-more__content"),a.box=e.querySelector(".view-more"),a.closeBtn=e.querySelector(".view-more__close-btn")}function i(){a.closeBtn.addEventListener("click",n)}function r(){o(),i()}var a={viewDetailsTmpl:null,heading:null,content:null,box:null,closeBtn:null};return e.init=r,e.render=t,e.closePage=n,e}(NewPage||{}),Router=function(e,t){function n(e){e=e.toLowerCase().split(" ").join("-"),window.location.hash=e,a=e}function o(){t(),window.localStorage.getItem("is-page-loaded")===!0&&n("/")}function i(){window.addEventListener("hashchange",o)}function r(){i()}var a="";return r(),e.changeHash=n,e}(Router||{},NewPage.closePage);$(function(){QuestBook.init(),VisitsCounter.update(),App.init(),NewPage.init(),initPhotoSwipeFromDOM(".my-gallery")});
